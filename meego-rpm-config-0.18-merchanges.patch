diff -ruN meego-rpm-config-0.18/macros meego-rpm-config-0.18-merchanges/macros
--- meego-rpm-config-0.18/macros	2011-05-28 01:32:21.000000000 -0400
+++ meego-rpm-config-0.18-merchanges/macros	2014-12-13 15:53:24.655473000 -0500
@@ -23,6 +23,13 @@
 #       Default fuzz level for %patch in spec file.
 %_default_patch_fuzz    2
 
+%_source_filedigest_algorithm 8
+%_binary_filedigest_algorithm 8
+
+# Use XZ compression for binary payloads
+%_binary_payload w6.xzdio
+
+
 #==============================================================================
 # ---- configure and makeinstall.
 #
@@ -124,26 +131,31 @@
 
 
 %install_info(:-:) \
-        ALL_ARGS=(%{**}) \
-        NUM_ARGS=${#ALL_ARGS[@]} \
+        lastarg() { shift $(($# - 1)) ; echo "$1" ; } \
         if test -x sbin/install-info ; then \
-            if test -e "${ALL_ARGS[$((NUM_ARGS-1))]}" ; then \
-                sbin/install-info "${ALL_ARGS[@]}" \
+            if test -e "$(lastarg %{**})" ; then \
+                sbin/install-info %{**} \
             fi \
         fi ;
 
 %install_info_delete(:-:) \
-        ALL_ARGS=(%{**}) \
-        NUM_ARGS=${#ALL_ARGS[@]} \
+        lastarg() { shift $(($# - 1)) ; echo "$1" ; } \
         if test -x sbin/install-info ; then \
-           if ! test -e "${ALL_ARGS[$((NUM_ARGS-1))]}" ; then \
-                sbin/install-info --quiet --delete "${ALL_ARGS[@]}" \
+           if ! test -e "$(lastarg %{**})" ; then \
+                sbin/install-info --quiet --delete %{**} \
            fi ; \
         fi ;
 
 #==============================================================================
 # ---- Build policy macros.
 #
+
+%__spec_install_pre %{___build_pre}\
+    [ "$RPM_BUILD_ROOT" != "/" ] && rm -rf "${RPM_BUILD_ROOT}"\
+    mkdir -p `dirname "$RPM_BUILD_ROOT"`\
+    mkdir "$RPM_BUILD_ROOT"\
+%{nil}
+
 #---------------------------------------------------------------------
 #	Expanded at end of %install scriptlet.
 #
@@ -170,37 +182,6 @@
 %{nil}
 
 
-#	Template for debug information sub-package.
-# NOTE: This is a copy from rpm to get the ifnarch noarch fix, it can be removed later
-%debug_package \
-%ifnarch noarch\
-%global __debug_package 1\
-%package debuginfo \
-Summary: Debug information for package %{name}\
-Group: Development/Debug\
-AutoReqProv: 0\
-%description debuginfo\
-This package provides debug information for package %{name}.\
-Debug information is useful when developing applications that use this\
-package or when debugging this package.\
-%files debuginfo -f debugfiles.list\
-%defattr(-,root,root,-)\
-\
-%package debugsource\
-Summary: Debug sources for package %{name}\
-Group: Development/Debug\
-AutoReqProv: 0\
-Requires: %{name}-debuginfo = %{version}-%{release}\
-%description debugsource\
-This package provides debug sources for package %{name}.\
-Debug sources are useful when developing applications that use this\
-package or when debugging this package.\
-%files debugsource -f debugsources.list\
-%defattr(-,root,root,-)\
-%endif\
-%{nil}
-
-
 %lang_package \
 %package locale \
 Summary: Translations and Locale for package %{name}\
@@ -249,8 +230,6 @@
 LANG=C\
 export LANG\
 unset DISPLAY\
-rm -rf %{?buildroot:%{buildroot}} \
-mkdir -p %{?buildroot:%{buildroot}} \
 %{nil}
 
 %check %%check\
diff -ruN meego-rpm-config-0.18/rpmrc meego-rpm-config-0.18-merchanges/rpmrc
--- meego-rpm-config-0.18/rpmrc	2011-05-28 01:32:21.000000000 -0400
+++ meego-rpm-config-0.18-merchanges/rpmrc	2014-12-13 15:59:11.063473000 -0500
@@ -1,7 +1,7 @@
 include: /usr/lib/rpm/rpmrc
 
 Optflags: i386 %{__global_cflags} -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables
-Optflags: i486 %{__global_cflags} -m32 -march=i486 -fasynchronous-unwind-tables
+Optflags: i486 %{__global_cflags} -m32 -msse -msse2 -march=i686 -mfpmath=sse -mtune=generic -fno-omit-frame-pointer -fasynchronous-unwind-tables
 Optflags: i586 %{__global_cflags} -m32 -march=core2 -mssse3  -mtune=atom -mfpmath=sse -fasynchronous-unwind-tables -fno-omit-frame-pointer
 Optflags: i686 %{__global_cflags} -m32 -march=core2 -mssse3  -mtune=atom  -mfpmath=sse -fasynchronous-unwind-tables -fno-omit-frame-pointer
 optflags: athlon %{__global_cflags} -m32 -march=athlon -fasynchronous-unwind-tables
@@ -46,12 +46,12 @@
 optflags: armv4tl %{__global_cflags} -march=armv4t
 optflags: armv5tejl %{__global_cflags} -march=armv5te
 Optflags: armv5tel %{__global_cflags}   -fmessage-length=0 -march=armv5te -mlittle-endian
-Optflags: armv6l %{__global_cflags}  -fmessage-length=0 -march=armv6 -mlittle-endian  -mfpu=vfp -mfloat-abi=softfp -D__SOFTFP__
-Optflags: armv7l %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mtune=cortex-a8 -mlittle-endian  -mfpu=vfpv3 -mfloat-abi=softfp -D__SOFTFP__
-optflags: armv7hl %{__global_cflags} -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -mno-thumb
-optflags: armv7nhl %{__global_cflags} -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=neon -mno-thumb  
-optflags: armv7thl %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -mthumb
-optflags: armv7tnhl %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=neon -mthumb  
+Optflags: armv6l %{__global_cflags}  -fmessage-length=0 -march=armv6 -mlittle-endian  -mfpu=vfp -mfloat-abi=softfp -D__SOFTFP__ -Wno-psabi
+Optflags: armv7l %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mlittle-endian -mfpu=vfpv3-d16 -mfloat-abi=softfp -D__SOFTFP__ -Wno-psabi
+optflags: armv7hl %{__global_cflags} -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=neon -mthumb -Wno-psabi
+optflags: armv7nhl %{__global_cflags} -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=neon -marm -Wno-psabi
+optflags: armv7thl %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=vfpv3-d16 -mthumb -Wno-psabi
+optflags: armv7tnhl %{__global_cflags}  -fmessage-length=0 -march=armv7-a -mfloat-abi=hard -mfpu=neon -mthumb -Wno-psabi
 
 
 optflags: atarist %{__global_cflags}
